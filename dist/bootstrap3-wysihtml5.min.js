!function(e,t){"use strict";var n={"font-styles":function(e,t){var n=t&&t.size?" btn-"+t.size:"";return""+"<li class='dropdown wysihtml5-toolbar-fontStyles'>"+"<a class='btn dropdown-toggle "+n+" btn-default' data-toggle='dropdown' href='#'>"+"<i class='glyphicon glyphicon-font'></i>&nbsp;<span class='current-font'>"+e.font_styles.normal+"</span>&nbsp;<b class='caret'></b>"+"</a>"+"<ul class='dropdown-menu'>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='div' tabindex='-1'>"+e.font_styles.normal+"</a></li>"+"<li role='presentation' class='divider'></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h1' tabindex='-1'><h1>"+e.font_styles.h1+"</h1></a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h2' tabindex='-1'><h2>"+e.font_styles.h2+"</h2></a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h3' tabindex='-1'><h3>"+e.font_styles.h3+"</h3></a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h4' tabindex='-1'><h4>"+e.font_styles.h4+"</h4></a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h5' tabindex='-1'><h5>"+e.font_styles.h5+"</h5></a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h6' tabindex='-1'><h6>"+e.font_styles.h6+"</h6></a></li>"+"</ul>"+"</li>"},color:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return""+"<li class='dropdown wysihtml5-toolbar-color'>"+"<a class='btn dropdown-toggle "+n+" btn-default' data-toggle='dropdown' href='#' tabindex='-1'>"+"<span class='current-color'>"+e.colours.black+"</span>&nbsp;<b class='caret'></b>"+"</a>"+"<ul class='dropdown-menu'>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='black'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='black'>"+e.colours.black+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='silver'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='silver'>"+e.colours.silver+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='gray'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='gray'>"+e.colours.gray+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='maroon'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='maroon'>"+e.colours.maroon+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='red'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='red'>"+e.colours.red+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='purple'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='purple'>"+e.colours.purple+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='green'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='green'>"+e.colours.green+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='olive'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='olive'>"+e.colours.olive+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='navy'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='navy'>"+e.colours.navy+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='blue'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='blue'>"+e.colours.blue+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='orange'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='orange'>"+e.colours.orange+"</a></li>"+"</ul>"+"</li>"},emphasis:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return""+"<li class='wysihtml5-toolbar-emphasis'>"+"<div class='btn-group'>"+"<a class='btn "+n+" btn-default' data-wysihtml5-command='bold' title='"+e.emphasis.bold+" (CTRL+B)' tabindex='-1'><i class='glyphicon glyphicon-bold'></i></a>"+"<a class='btn "+n+" btn-default' data-wysihtml5-command='italic' title='"+e.emphasis.italic+" (CTRL+I)' tabindex='-1'><i class='glyphicon glyphicon-italic'></i></a>"+"<a class='btn "+n+" btn-default' data-wysihtml5-command='underline' title='"+e.emphasis.underline+" (CTRL+U)' tabindex='-1'><b><u>U</u></b></a>"+"</div>"+"</li>"},textAlign:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return""+"<li class='wysihtml5-toolbar-textAlign'>"+"<div class='btn-group'>"+"<a class='btn "+n+" btn-default' data-wysihtml5-command='justifyLeft' title='"+e.text.alignLeft+"' tabindex='-1'><i class='glyphicon glyphicon-align-left'></i></a>"+"<a class='btn "+n+" btn-default' data-wysihtml5-command='justifyCenter' title='"+e.text.alignCenter+"' tabindex='-1'><i class='glyphicon glyphicon-align-center'></i></a>"+"<a class='btn "+n+" btn-default' data-wysihtml5-command='justifyFull' title='"+e.text.alignJustify+"' tabindex='-1'><i class='glyphicon glyphicon-align-justify'></i></a>"+"<a class='btn "+n+" btn-default' data-wysihtml5-command='justifyRight' title='"+e.text.alignRight+"' tabindex='-1'><i class='glyphicon glyphicon-align-right'></i></a>"+"</div>"+"</li>"},lists:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return""+"<li class='wysihtml5-toolbar-lists'>"+"<div class='btn-group'>"+"<a class='btn "+n+" btn-default' data-wysihtml5-command='insertUnorderedList' title='"+e.lists.unordered+"' tabindex='-1'><i class='glyphicon glyphicon-list'></i></a>"+"<a class='btn "+n+" btn-default' data-wysihtml5-command='insertOrderedList' title='"+e.lists.ordered+"' tabindex='-1'><i class='glyphicon glyphicon-th-list'></i></a>"+"<a class='btn "+n+" btn-default' data-wysihtml5-command='Outdent' title='"+e.lists.outdent+"' tabindex='-1'><i class='glyphicon glyphicon-indent-right'></i></a>"+"<a class='btn -"+n+" btn-default' data-wysihtml5-command='Indent' title='"+e.lists.indent+"' tabindex='-1'><i class='glyphicon glyphicon-indent-left'></i></a>"+"</div>"+"</li>"},blockquote:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return""+"<li class='wysihtml5-toolbar-blockquote'>"+"<a class='btn "+n+" btn-default' data-wysihtml5-command='insertBlockQuote' title='"+e.text.blockquote+"' tabindex='-1'><i style='font-weight:bold;'>„”</i></a>"+"</li>"},link:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return""+"<li class='wysihtml5-toolbar-link'>"+"<div class='bootstrap-wysihtml5-insert-link-modal modal fade'>"+"<div class='modal-dialog'>"+"<div class='modal-content'>"+"<div class='modal-header'>"+"<button type='button' class='close' data-dismiss='modal'>"+"<span aria-hidden='true'>×</span>"+"<span class='sr-only'>Close</span>"+"</button>"+"<h4 class='modal-title'>"+e.link.insert+"</h4>"+"</div>"+"<div class='modal-body'>"+"<input placeholder='http://' class='bootstrap-wysihtml5-insert-link-url form-control'>"+"<label class='checkbox' style='margin-left:20px;'> <input type='checkbox' class='bootstrap-wysihtml5-insert-link-target' checked>"+e.link.target+"</label>"+"<br/>"+"<div class='alert alert-danger' style='visibility:hidden;' role='alert'>"+e.link.invalid+"</div>"+"</div>"+"<div class='modal-footer'>"+"<button type='button' class='btn btn-default' data-dismiss='modal'>"+e.link.cancel+"</button>"+"<button type='button' class='btn btn-primary' data-dismiss='modal'>"+e.link.insert+"</button>"+"</div>"+"</div>"+"</div>"+"</div>"+"<button type='button' class='btn "+n+" btn-default' title='"+e.link.insert+"' tabindex='-1' data-toggle='modal' data-target='.bootstrap-wysihtml5-insert-link-modal'><i class='glyphicon glyphicon-share'></i></button>"+"</li>"},table:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return""+"<li class='wysihtml5-toolbar-table'>"+"<div class='bootstrap-wysihtml5-insert-table-modal modal fade'>"+"<div class='modal-dialog'>"+"<div class='modal-content'>"+"<div class='modal-header'>"+"<button type='button' class='close' data-dismiss='modal'>"+"<span aria-hidden='true'>×</span>"+"<span class='sr-only'>Close</span>"+"</button>"+"<h4 class='modal-title'>"+e.table.insert+"</h4>"+"</div>"+"<div class='modal-body'>"+"<div class='row'>"+"<div class='form-group col-sm-4'>"+"<label class='control-label'>"+e.table.rows+"<input type='number' class='form-control wysihtml5-table-rows' value='3' min='1'>"+"</label>"+"</div>"+"<div class='form-group col-sm-4'>"+"<label class='control-label'>"+e.table.columns+"<input type='number' class='form-control wysihtml5-table-cols' value='3' min='1'>"+"</label>"+"</div>"+"<div class='form-group col-sm-4'>"+"<label class='control-label' style='width:100%;position:relative;'>"+"<span>"+e.table.heading.label+"</span>"+"<button type='button' class='btn btn-default dropdown-toggle form-control' data-toggle='dropdown'>"+"<span class='current-heading' data-index='0'>"+e.table.heading.none+"</span>&nbsp;<b class='caret'></b>"+"</button>"+"<ul class='dropdown-menu' style='right:0;'>"+"<li><a class='wysihtml5-table-heading' tabindex='-1' href='javascript:;' unselectable='on' data-index='0'>"+e.table.heading.none+"</a></li>"+"<li><a class='wysihtml5-table-heading' tabindex='-1' href='javascript:;' unselectable='on' data-index='1'>"+e.table.heading.row+"</a></li>"+"<li><a class='wysihtml5-table-heading' tabindex='-1' href='javascript:;' unselectable='on' data-index='2'>"+e.table.heading.column+"</a></li>"+"</ul>"+"</div>"+"</div>"+"<br/>"+"<div class='alert alert-danger' style='visibility:hidden;' role='alert'>"+e.table.invalid+"</div>"+"</div>"+"<div class='modal-footer'>"+"<button type='button' class='btn btn-default' data-dismiss='modal'>"+e.table.cancel+"</button>"+"<button type='button' class='btn btn-primary' data-dismiss='modal'>"+e.table.insert+"</button>"+"</div>"+"</div>"+"</div>"+"</div>"+"<button type='button' class='btn "+n+" btn-default' title='"+e.table.insert+"' tabindex='-1' data-toggle='modal' data-target='.bootstrap-wysihtml5-insert-table-modal'><i class='glyphicon glyphicon-th'></i></button>"+"</li>"},image:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return""+"<li class='wysihtml5-toolbar-image'>"+"<div class='bootstrap-wysihtml5-insert-image-modal modal fade'>"+"<div class='modal-dialog'>"+"<div class='modal-content'>"+"<div class='modal-header'>"+"<button type='button' class='close' data-dismiss='modal'>"+"<span aria-hidden='true'>×</span>"+"<span class='sr-only'>Close</span>"+"</button>"+"<h4 class='modal-title'>"+e.image.insert+"</h4>"+"</div>"+"<div class='modal-body'>"+"<div class='input-group'>"+"<input type='file' class='hidden bootstrap-wysihtml5-insert-image-file'>"+"<input type='hidden'/>"+"<input placeholder='http://' class='bootstrap-wysihtml5-insert-image-url form-control'>"+"<div class='input-group-btn'>"+"<button type='button' class='btn btn-default dropdown-toggle' data-toggle='dropdown'>"+e.image.fromUrl+" <span class='caret'></span></button>"+"<ul class='dropdown-menu dropdown-menu-right' role='menu' style='right:0;left:auto;'>"+"<li><a href='#' class='bootstrap-wysihtml5-insert-image-local'>"+e.image.fromComputer+"</a></li>"+"</ul>"+"</div>"+"</div>"+"<br/>"+"<div class='alert alert-danger' style='visibility:hidden;' role='alert'></div>"+"</div>"+"<div class='modal-footer'>"+"<button type='button' class='btn btn-default' data-dismiss='modal'>"+e.image.cancel+"</button>"+"<button type='button' class='btn btn-primary' data-dismiss='modal'>"+e.image.insert+"</button>"+"</div>"+"</div>"+"</div>"+"</div>"+"<button type='button' class='btn "+n+" btn-default' title='"+e.image.insert+"' tabindex='-1' data-toggle='modal' data-target='.bootstrap-wysihtml5-insert-image-modal'><i class='glyphicon glyphicon-picture'></i></button>"+"</li>"},video:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return""+"<li class='wysihtml5-toolbar-video'>"+"<div class='bootstrap-wysihtml5-insert-video-modal modal fade'>"+"<div class='modal-dialog'>"+"<div class='modal-content'>"+"<div class='modal-header'>"+"<button type='button' class='close' data-dismiss='modal'>"+"<span aria-hidden='true'>×</span>"+"<span class='sr-only'>Close</span>"+"</button>"+"<h4 class='modal-title'>"+e.video.insert+"</h4>"+"</div>"+"<div class='modal-body'>"+"<input type='text' data-wysihtml5-dialog-field='src' placeholder='https://' class='bootstrap-wysihtml5-insert-video-url form-control'>"+"<br/>"+"<div class='btn-group bootstrap-wysihtml5-insert-video-format' data-toggle='buttons'>"+"<label class='btn btn-default active' title='"+e.video.widescreen+"'>"+"<input type='radio' data-value='wide' name='options'checked> 16:9"+"</label>"+"<label class='btn btn-default' title='"+e.video.tv+"'>"+"<input type='radio' data-value='tv' name='options'> &nbsp;4:3&nbsp;"+"</label>"+"</div>"+"<i class='glyphicon glyphicon-question-sign pull-right' title='"+e.video.supported+": &#10;YouTube, &#10;Vimeo, &#10;DailyMotion, &#10;Vbox7'></i>"+"<br/><br/>"+"<div class='alert alert-danger' style='visibility:hidden;' role='alert'>"+e.video.invalid+"</div>"+"</div>"+"<div class='modal-footer'>"+"<button type='button' class='btn btn-default' data-dismiss='modal'>"+e.video.cancel+"</button>"+"<button type='button' class='btn btn-primary' data-dismiss='modal'>"+e.video.insert+"</button>"+"</div>"+"</div>"+"</div>"+"</div>"+"<button type='button' class='btn "+n+" btn-default' title='"+e.video.insert+"' tabindex='-1' data-toggle='modal' data-target='.bootstrap-wysihtml5-insert-video-modal'><i class='glyphicon glyphicon-facetime-video'></i></button>"+"</li>"},html:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return""+"<li>"+"<button type='button' class='btn "+n+" btn-danger' data-wysihtml5-action='change_view' title='"+e.html.edit+"' tabindex='-1'><b style='letter-spacing:1px;'>&lt;/&gt;</b></button>"+"</li>"}};var r=function(e,t,r){try{return n[e](t,r)}catch(i){return""}};var i=function(t,r){this.el=t;var i=r||o;for(var s in i.customTemplates){n[s]=i.customTemplates[s]}this.toolbar=this.createToolbar(t,i);this.editor=this.createEditor(r);window.editor=this.editor;e("iframe.wysihtml5-sandbox").each(function(t,n){e(n.contentWindow).off("focus.wysihtml5").on({"focus.wysihtml5":function(){e("li.dropdown").removeClass("open")}})})};i.prototype={constructor:i,createEditor:function(n){n=n||{};n=e.extend(true,{},n);n.toolbar=this.toolbar[0];var r=new t.Editor(this.el[0],n);if(n&&n.events){for(var i in n.events){r.on(i,n.events[i])}}return r},createToolbar:function(t,n){var i=this;var s=e("<ul/>",{"class":"wysihtml5-toolbar",style:"display:none"});var a=n.locale||o.locale||"en";for(var f in o){var l=false;if(n[f]!==undefined){if(n[f]===true){l=true}}else{l=o[f]}if(l===true){s.append(r(f,u[a],n));if(f==="html"){this.initHtml(s)}if(f==="link"){this.initInsertLink(s)}if(f==="table"){this.initInsertTable(s)}if(f==="image"){this.initInsertImage(s,a)}if(f==="video"){this.initInsertVideo(s)}}}if(n.useParserRules===false){n.parser=function(t,n){return t}}if(n.toolbar){for(f in n.toolbar){s.append(n.toolbar[f])}}s.find("a[data-wysihtml5-command='formatBlock']").click(function(t){var n=t.target||t.srcElement;var r=e(n);i.toolbar.find(".current-font").text(r.html())});s.find("a[data-wysihtml5-command='foreColor']").click(function(t){var n=t.target||t.srcElement;var r=e(n);i.toolbar.find(".current-color").text(r.html())});this.el.before(s);return s},initHtml:function(e){var t="[data-wysihtml5-action='change_view']";e.find(t).click(function(n){e.find(".btn").not(t).toggleClass("disabled")})},initInsertImage:function(e,t){var n=this;var r=e.find(".bootstrap-wysihtml5-insert-image-modal");var i=r.find(".bootstrap-wysihtml5-insert-image-url");var s=r.find(".bootstrap-wysihtml5-insert-image-local");var o=r.find(".bootstrap-wysihtml5-insert-image-file");var a=r.find(".btn-primary");var f=i.val();var l=r.find(".alert-danger");var c;var h=function(){var e=i.val();i.val(f);n.editor.currentView.element.focus();if(c){n.editor.composer.selection.setBookmark(c);c=null}if(e){n.editor.composer.commands.exec("insertImage",{src:e,"class":"img-responsive"})}else{l.css("visibility","visible");l.text(u[t].image.invalid);return false}};i.keypress(function(e){if(e.which==13){h();r.modal("hide")}});a.click(h);s.click(function(){o.trigger("click")});o.change(function(e){a.prop("disabled",true);var i=e.target.files[0],s=new FileReader;if(!i.type.match("image.*"))return;s.onload=function(e){if(c){n.editor.composer.selection.setBookmark(c);c=null}r.modal("hide");n.editor.composer.commands.exec("insertImage",{alt:i.name,title:i.name,src:e.target.result,"class":"img-responsive"});a.prop("disabled",false)};s.onerror=function(e){l.css("visibility","visible");l.text(e.target.error.code+": "+u[t].image.error)};s.readAsDataURL(i)});r.on("shown.bs.modal",function(){i.focus()});r.on("hidden.bs.modal",function(){l.css("visibility","hidden");i.val("");r.find(".input-group-btn.open").removeClass("open");setTimeout(function(){n.editor.currentView.element.focus()})})},initInsertVideo:function(e){var t=this;var n=e.find(".bootstrap-wysihtml5-insert-video-modal");var r=n.find(".bootstrap-wysihtml5-insert-video-url");var i=n.find(".btn-primary");var s=r.val();var o=n.find(".alert-danger");var u;var a=function(){o.css("visibility","hidden");var e=r.val();var i=false;if(/^(https?\:\/\/(www.)?youtube.com\/watch\?v=)/i.test(e)){i=e.replace(/^(https?\:\/\/(www.)?youtube.com\/watch\?v=)/,"");i="//www.youtube.com/embed/"+i.split("&")[0]}else if(/^(https?\:\/\/(www.)?youtu.be\/)/i.test(e)){i=e.replace(/^^(https?\:\/\/(www.)?youtu.be\/)/,"");i="//www.youtube.com/embed/"+i.split("&")[0]}else if(/^(https?\:\/\/(www.)?vimeo.com\/)/i.test(e)){i=e.replace(/^^(https?\:\/\/(www.)?vimeo.com\/)/,"");i="//player.vimeo.com/video/"+i.split("&")[0]+"?title=0&byline=0&portrait=0&badge=0"}else if(/^(https?\:\/\/(www.)?dailymotion.com\/)/i.test(e)){i=e.replace(/^^(https?\:\/\/(www.)?dailymotion.com\/)/,"");i="//dailymotion.com/embed/"+i.split("&")[0]}else if(/^(https?\:\/\/(www.)?vbox7.com\/play:)/i.test(e)){i=e.replace(/^^(https?\:\/\/(www.)?vbox7.com\/play:)/,"");i="//vbox7.com/emb/external.php?vid="+i.split("&")[0]}if(i){var s=n.find(".bootstrap-wysihtml5-insert-video-format input:checked").data("value");t.editor.currentView.element.focus();if(u){t.editor.composer.selection.setBookmark(u);u=null}t.editor.composer.commands.exec("insertVideo",i,s);r.val("")}else{o.css("visibility","visible");return false}};r.keypress(function(e){if(e.which==13){a();n.modal("hide")}});i.click(a);n.on("shown.bs.modal",function(){r.focus()});n.on("hidden.bs.modal",function(){o.css("visibility","hidden");r.val("");setTimeout(function(){t.editor.currentView.element.focus()})})},initInsertLink:function(e){function f(e){return e&&/^([a-z]([a-z]|\d|\+|-|\.)*):(\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?((\[(|(v[\da-f]{1,}\.(([a-z]|\d|-|\.|_|~)|[!\$&'\(\)\*\+,;=]|:)+))\])|((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=])*)(:\d*)?)(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*|(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)){0})(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)}var t=this;var n=e.find(".bootstrap-wysihtml5-insert-link-modal");var r=n.find(".bootstrap-wysihtml5-insert-link-url");var i=n.find(".bootstrap-wysihtml5-insert-link-target");var s=n.find(".btn-primary");var o=r.val();var u=n.find(".alert-danger");var a;var l=function(){var e=r.val();r.val(o);t.editor.currentView.element.focus();if(a){t.editor.composer.selection.setBookmark(a);a=null}if(f(e)){var n=i.prop("checked");t.editor.composer.commands.exec("createLink",{href:e,target:n?"_blank":"_self",rel:n?"nofollow":""})}else{u.css("visibility","visible");return false}};var c=false;r.keypress(function(e){if(e.which==13){l();n.modal("hide")}});s.click(l);n.on("shown.bs.modal",function(){r.focus()});n.on("hidden.bs.modal",function(){u.css("visibility","hidden");r.val("");setTimeout(function(){t.editor.currentView.element.focus()})})},initInsertTable:function(t){var n=this,r=t.find(".bootstrap-wysihtml5-insert-table-modal"),i=r.find(".wysihtml5-table-rows"),s=r.find(".wysihtml5-table-cols"),o=r.find(".current-heading"),u=r.find(".btn-primary"),a=i.val(),f=s.val(),l=r.find(".alert-danger"),c;var h=function(){var e=i.val(),t=s.val(),r=o.attr("data-index");if(r==1)r="rows";else if(r==2)r="cols";i.val(a);s.val(f);n.editor.currentView.element.focus();if(c){n.editor.composer.selection.setBookmark(c);c=null}if(!isNaN(e)&&!isNaN(t)&&e>0&&t>0){n.editor.composer.commands.exec("createTable",{rows:e,cols:t,heading:r})}else{l.css("visibility","visible");return false}};var p=false;i.keypress(function(e){if(e.which==13){s.focus()}});s.keypress(function(e){if(e.which==13){h();r.modal("hide")}});r.find(".wysihtml5-table-heading").click(function(t){var n=t.target||t.srcElement;var i=e(n);r.find(".current-heading").text(i.html()).attr("data-index",i.attr("data-index"))});u.click(h);r.on("shown.bs.modal",function(){i.focus()});r.on("hidden.bs.modal",function(){l.css("visibility","hidden");i.val(a);s.val(f);o.text(r.find(".wysihtml5-table-heading[data-index=0]").text());o.attr("data-index",0);o.closest(".control-label").removeClass("open");setTimeout(function(){n.editor.currentView.element.focus()})})}};var s={resetDefaults:function(){e.fn.wysihtml5.defaultOptions=e.extend(true,{},e.fn.wysihtml5.defaultOptionsCache)},bypassDefaults:function(t){return this.each(function(){var n=e(this);n.data("wysihtml5",new i(n,t))})},shallowExtend:function(t){var n=e.extend({},e.fn.wysihtml5.defaultOptions,t||{},e(this).data());var r=this;return s.bypassDefaults.apply(r,[n])},deepExtend:function(t){var n=e.extend(true,{},e.fn.wysihtml5.defaultOptions,t||{});var r=this;return s.bypassDefaults.apply(r,[n])},init:function(e){var t=this;return s.shallowExtend.apply(t,[e])}};e.fn.wysihtml5=function(t){if(s[t]){return s[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){return s.init.apply(this,arguments)}else{e.error("Method "+t+" does not exist on jQuery.wysihtml5")}};e.fn.wysihtml5.Constructor=i;var o=e.fn.wysihtml5.defaultOptions={useLineBreaks:false,autoLink:true,supportTouchDevices:true,cleanUp:true,size:"sm","font-styles":true,color:true,emphasis:true,textAlign:true,lists:true,blockquote:true,link:true,table:true,image:true,video:true,html:false,events:{},parserRules:{classes:{"wysiwyg-font-size-smaller":1,"wysiwyg-font-size-larger":1,"wysiwyg-font-size-xx-large":1,"wysiwyg-font-size-x-large":1,"wysiwyg-font-size-large":1,"wysiwyg-font-size-medium":1,"wysiwyg-font-size-small":1,"wysiwyg-font-size-x-small":1,"wysiwyg-font-size-xx-small":1,"wysiwyg-text-align-right":1,"wysiwyg-text-align-center":1,"wysiwyg-text-align-left":1,"wysiwyg-text-align-justify":1,"wysiwyg-float-left":1,"wysiwyg-float-right":1,"wysiwyg-clear-right":1,"wysiwyg-clear-left":1,"wysiwyg-color-silver":1,"wysiwyg-color-gray":1,"wysiwyg-color-white":1,"wysiwyg-color-maroon":1,"wysiwyg-color-red":1,"wysiwyg-color-purple":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-olive":1,"wysiwyg-color-yellow":1,"wysiwyg-color-navy":1,"wysiwyg-color-blue":1,"wysiwyg-color-teal":1,"wysiwyg-color-aqua":1,"wysiwyg-color-orange":1,"embed-responsive":1,"embed-responsive-16by9":1,"embed-responsive-item":1,"img-responsive":1},tags:{b:{},i:{},br:{},ol:{},ul:{},li:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},blockquote:{},u:1,img:{check_attributes:{width:"numbers",alt:"alt",src:"any",height:"numbers",title:"alt"}},a:{check_attributes:{href:"src",target:"alt",rel:"alt"}},iframe:{check_attributes:{src:"any",width:"numbers",height:"numbers"},set_attributes:{frameborder:"0"}},p:1,span:1,div:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,th:1,td:1,code:1,pre:1,style:1}},stylesheets:["./src/bootstrap3-wysihtml5-editor.css"],locale:"en"};if(typeof e.fn.wysihtml5.defaultOptionsCache==="undefined"){e.fn.wysihtml5.defaultOptionsCache=e.extend(true,{},e.fn.wysihtml5.defaultOptions)}var u=e.fn.wysihtml5.locale={en:{font_styles:{normal:"Normal text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6"},text:{alignLeft:"Align left",alignCenter:"Align center",alignJustify:"Justify",alignRight:"Align right",blockquote:"Blockquote"},emphasis:{bold:"Bold",italic:"Italic",underline:"Underline"},lists:{unordered:"Unordered list",ordered:"Ordered list",outdent:"Outdent",indent:"Indent"},link:{insert:"Insert link",cancel:"Cancel",target:"Open link in new window",invalid:"Invalid link URL"},table:{insert:"Insert table",cancel:"Cancel",rows:"Rows",columns:"Columns",heading:{label:"Heading",none:"None",row:"First row",column:"First column"},invalid:"Invalid table rows/columns"},image:{insert:"Insert image",cancel:"Cancel",fromUrl:"From URL",fromComputer:"From local file",invalid:"Invalid image URL",error:"An error occurred reading this file"},video:{insert:"Insert Video",cancel:"Cancel",widescreen:"Widescreen",tv:"TV",supported:"Supported video formats",invalid:"Invalid video URL"},html:{edit:"Edit HTML"},colours:{black:"Black",silver:"Silver",gray:"Grey",maroon:"Maroon",red:"Red",purple:"Purple",green:"Green",olive:"Olive",navy:"Navy",blue:"Blue",orange:"Orange"}}}}(window.jQuery,window.wysihtml5);(function(e){var t="";e.commands.insertVideo={exec:function(t,n,r,i){var s=t.doc,o,u=this.state(t),a,f;if(u){t.selection.setBefore(u);f=u.parentNode;f.removeChild(u);e.dom.removeEmptyTextNodes(f);if(f.nodeName==="A"&&!f.firstChild){t.selection.setAfter(f);f.parentNode.removeChild(f)}e.quirks.redraw(t.element);return}o=s.createElement("DIV");u=s.createElement("IFRAME");o.className="embed-responsive "+(i=="tv"?"embed-responsive-4by3":"embed-responsive-16by9");u.className="embed-responsive-item";o.appendChild(u);u.src=r;u.setAttribute("allowFullScreen","");t.selection.insertNode(o);if(e.browser.hasProblemsSettingCaretAfterImg()){textNode=s.createTextNode(e.INVISIBLE_SPACE);t.selection.insertNode(textNode);t.selection.setAfter(textNode)}else{t.selection.setAfter(o)}},state:function(n){var r=n.doc,i,s,o;if(!e.dom.hasElementWithTagName(r,t)){return false}i=n.selection.getSelectedNode(r);if(!i){return false}if(i.nodeName===t){return i}if(i.nodeType!==e.ELEMENT_NODE){return false}s=n.selection.getText(r);s=e.lang.string(s).trim();if(s){return false}o=n.selection.getNodes(r,e.ELEMENT_NODE,function(e){return e.nodeName==="IFRAME"});if(o.length!==1){return false}return o[0]},value:function(e){var t=this.state(e);return t&&t.src}};e.commands.createTable.exec=function(e,t,n){var r,i,s,o;if(n&&n.cols&&n.rows&&parseInt(n.cols,10)>0&&parseInt(n.rows,10)>0){if(n.tableStyle){o='<table style="'+n.tableStyle+'">'}else{o="<table>"}o+="<tbody>";for(i=0;i<n.rows;i++){o+="<tr>";for(r=0;r<n.cols;r++){if(n.heading&&n.heading=="rows"&&i===0)o+="<th>&nbsp;</th>";else if(n.heading&&n.heading=="cols"&&r===0)o+="<th>&nbsp;</th>";else o+="<td>&nbsp;</td>"}o+="</tr>"}o+="</tbody></table>";e.commands.exec("insertHTML",o)}}})(wysihtml5)